{"version":3,"file":"control.min.js","sources":["../src/control.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Provides the block_todo/control module\n *\n * @category    output\n * @copyright   2018 David Mudr√°k <david@moodle.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module block_todo/control\n */\ndefine([\n        'jquery',\n        'core/log',\n        'core/ajax',\n        'core/templates',\n        'core/str',\n        'core/modal_factory',\n        'core/modal_events'\n    ],\n    function(\n        $,\n        Log,\n        Ajax,\n        Templates,\n        Str,\n        ModalFactory,\n        ModalEvents\n    ) {\n    'use strict';\n\n    /**\n     * Initializes the block controls.\n     *\n     * @param {int} instanceid The instance id\n     * @param {int} contextid\n     */\n    function init(instanceid, contextid) {\n        Log.debug('block_todo/control: initializing controls of the todo block instance ' + instanceid);\n\n        var region = $('[data-region=\"block_todo-instance-' + instanceid +'\"]').first();\n\n        if (!region.length) {\n            Log.error('block_todo/control: wrapping region not found!');\n            return;\n        }\n\n        var control = new TodoControl(region, instanceid, contextid);\n        control.main();\n    }\n\n    /**\n     * Controls a single ToDo block instance contents.\n     *\n     * @constructor\n     * @param {jQuery} region\n     * @param {int} instanceid\n     * @param {int} contextid\n     */\n    function TodoControl(region, instanceid, contextid) {\n        var self = this;\n        self.region = region;\n        self.instanceid = instanceid;\n        self.contextid = contextid;\n    }\n\n    /**\n     * Run the controller.\n     *\n     */\n    TodoControl.prototype.main = function() {\n        var self = this;\n\n        self.addForm = self.region.find('[data-control=\"addform\"]').first();\n        self.addTextInput = self.addForm.find('.block_todo_text');\n        self.addDueDateInput = self.addForm.find('.block_todo_duedate');\n        self.addSubmitButton = self.addForm.find('.block_todo_submit');\n        self.itemsList = self.region.find('.list-wrapper');\n\n        self.refreshButton = self.region.find('.block_todo_refresh');\n\n        self.initAddFeatures();\n        self.initEditFeatures();\n        self.initRefresh();\n    };\n\n    /**\n     * Initialize refresh of items.\n     *\n     * @method\n     */\n    TodoControl.prototype.initRefresh = function () {\n        var self = this;\n\n        self.addForm.on('submit', function(e) {\n            e.preventDefault();\n            self.addNewTodo();\n        });\n\n        self.refreshButton.on('click', function() {\n           self.refreshTodo();\n        });\n    };\n\n    /**\n     * Initialize the controls for adding a new todo item.\n     *\n     * @method\n     */\n    TodoControl.prototype.initAddFeatures = function () {\n        var self = this;\n\n        self.addForm.on('submit', function(e) {\n            e.preventDefault();\n            self.addNewTodo();\n        });\n\n        self.addSubmitButton.on('click', function() {\n            self.addForm.submit();\n        });\n    };\n\n    /**\n     * Initialize the controls for modifying existing items.\n     *\n     * @method\n     */\n    TodoControl.prototype.initEditFeatures = function() {\n        var self = this;\n\n        // Toggle item completion.\n        self.itemsList.on('click', '[data-control=\"toggle\"]', function(e) {\n            var id = $(e.currentTarget).parent().attr('data-item');\n            self.toggleItem(id);\n        });\n        // Delete item.\n        self.itemsList.on('click', '[data-control=\"delete\"]', function(e) {\n            var id = $(e.currentTarget).parent().attr('data-id');\n            var text = $(e.currentTarget).parent().attr('data-text');\n            self.deleteItem(e, id, text);\n        });\n        // Edit item.\n        self.itemsList.on('click', '[data-control=\"edit\"]', function(e) {\n            var id = $(e.currentTarget).parent().attr('data-id');\n            var text = $(e.currentTarget).parent().attr('data-text');\n            var duedate = $(e.currentTarget).parent().attr('data-duedate');\n            self.editItem(e, id, text, duedate);\n        });\n    };\n\n    /**\n     * Refresh items.\n     *\n     * @method\n     * @return {Deferred}\n     */\n    TodoControl.prototype.refreshTodo = function() {\n        var self = this;\n\n        return Ajax.call([{\n            methodname: 'block_todo_refresh_items',\n            args: {\n                instanceid: self.instanceid,\n                contextid: self.contextid,\n            }\n\n        }])[0].fail(function(reason) {\n            Log.error('block_todo/control: unable to refresh the items');\n            Log.debug(reason);\n            return $.Deferred().reject();\n\n        }).then(function(response) {\n            return Templates.render('block_todo/items', response).fail(function(reason) {\n                Log.error('block_todo/control: unable to render items:' + reason);\n            });\n\n        }).then(function(items) {\n            self.region.find('.items-list').html(items);\n            return $.Deferred().resolve();\n        });\n    };\n\n\n\n\n    /**\n     * Add a new todo item.\n     *\n     * @method\n     * @return {Deferred}\n     */\n    TodoControl.prototype.addNewTodo = function() {\n        var self = this;\n        var todoText = $.trim(self.addTextInput.val());\n        var duedate = null;\n\n        // If there is a due date, convert it.\n        if (self.addDueDateInput.val()) {\n            duedate = dateToTimestamp(self.addDueDateInput.val());\n        }\n\n        if (!todoText) {\n            return Str.get_string('placeholdermore', 'block_todo').then(function(text) {\n                self.addTextInput.prop('placeholder', text);\n                return $.Deferred().resolve();\n            });\n        }\n\n        self.addTextInput.prop('disabled', true);\n\n        return Ajax.call([{\n            methodname: 'block_todo_add_item',\n            args: {\n                todotext: todoText,\n                duedate: duedate,\n            }\n\n        }])[0].fail(function(reason) {\n            Log.error('block_todo/control: unable to add the item');\n            Log.debug(reason);\n            self.addSubmitButton.addClass('btn-danger');\n            self.addSubmitButton.html('<i class=\"fa fa-exclamation-circle\" aria-hidden=\"true\"></i>');\n            return $.Deferred().reject();\n\n        }).then(function(response) {\n            return Templates.render('block_todo/item', response).fail(function(reason) {\n                Log.error('block_todo/control: unable to render the new item:' + reason);\n            });\n\n        }).then(function(item) {\n            addDategroup(self, duedate, item);\n            self.addTextInput.val('');\n            self.addTextInput.prop('disabled', false);\n            self.addTextInput.focus();\n            return $.Deferred().resolve();\n        });\n    };\n\n    /**\n     * Nest the item inside a date group, or create one if it doesn't exist.\n     *\n     * @param {object} list Outer list of duedates\n     * @param {int} duedate 10 digit timestamp\n     * @param {object} item HTML of item to insert\n     */\n    function addDategroup(list, duedate, item) {\n\n        var formattedDate = '';\n\n        // If there is no duedate, set it to 'General'.\n        if (!duedate) {\n            formattedDate = 'General';\n            duedate = '';\n        } else {\n            formattedDate = timestampToFormattedDate(duedate);\n        }\n\n        var attribute = '[data-duedategroup=\"' + duedate + '\"]';\n\n        // Prepend the item if the dategroup exists.\n        if (list.itemsList.find(attribute).length) {\n            list.itemsList.find(attribute).find('.list-group').prepend(item);\n        } else {\n            var html = '';\n            html += '<div data-duedategroup=\"' + duedate + '\">';\n            html += '<h5 class=\"mt-3 h6\">' + formattedDate + '</h5>';\n            html += '<ul class=\"list-group unstyled\">';\n            html += item;\n            html += '</ul>';\n            html += '</div>';\n\n            list.itemsList.prepend(html);\n        }\n\n    }\n\n    /**\n     * Toggle the done status of the given item.\n     *\n     * @method\n     * @param {int} id The item id\n     * @return {Deferred}\n     */\n    TodoControl.prototype.toggleItem = function(id) {\n\n        if (!id) {\n            return $.Deferred().resolve();\n        }\n\n        var self = this;\n\n        return Ajax.call([{\n            methodname: 'block_todo_toggle_item',\n            args: {\n                id: id\n            }\n\n        }])[0].fail(function(reason) {\n            Log.error('block_todo/control: unable to toggle the item');\n            Log.debug(reason);\n            return $.Deferred().reject();\n\n        }).then(function(response) {\n            return Templates.render('block_todo/item', response).fail(function(reason) {\n                Log.error('block_todo/control: unable to render the new item:' + reason);\n            });\n\n        }).then(function(item) {\n            self.itemsList.find('[data-item=\"' + id + '\"]').replaceWith(item);\n            return $.Deferred().resolve();\n        });\n    };\n\n    /**\n     * Edit the given item.\n     *\n     * @method\n     * @param {Event} e The event\n     * @param {id} id The event\n     * @param {string} text The event\n     * @param {int} duedate The event\n     * @return {Deferred}\n     */\n    TodoControl.prototype.editItem = function(e, id, text, duedate) {\n\n        if (!id) {\n            return $.Deferred().resolve();\n        }\n\n        var self = this;\n        var trigger = $(e.currentTarget);\n\n        const args = {\n            id: id,\n            text: text,\n        };\n\n        if (duedate) {\n            args.duedate = timestampToDate(duedate);\n        }\n\n        // Create modal.\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: 'Edit item',\n            body: Templates.render('block_todo/edit', args),\n        }, trigger)\n        .done(function(modal) {\n\n            modal.getRoot().on(ModalEvents.save, function() {\n\n                var modalBody = modal.getBody();\n                var newText = $.trim(modalBody.find('.block_todo_edit_text').val());\n                var newDuedate = dateToTimestamp(modalBody.find('.block_todo_edit_duedate').val());\n\n                return Ajax.call([{\n                    methodname: 'block_todo_edit_item',\n                    args: {\n                        id: id,\n                        todotext: newText,\n                        duedate: newDuedate,\n                    }\n\n                }])[0].fail(function(reason) {\n                    Log.error('block_todo/control: unable to edit the item');\n                    Log.debug(reason);\n                    return $.Deferred().reject();\n\n                }).then(function(response) {\n\n                    return Templates.render('block_todo/item', response).fail(function(reason) {\n                        Log.error('block_todo/control: unable to render the new item:' + reason);\n                    });\n\n                }).then(function(item) {\n                    self.itemsList.find('[data-item=\"' + id + '\"]').replaceWith(item);\n                    return $.Deferred().resolve();\n                });\n            });\n\n            // Handle hidden event.\n            modal.getRoot().on(ModalEvents.hidden, function() {\n                // Destroy when hidden.\n                modal.destroy();\n            });\n\n            // Show the modal.\n            modal.show();\n        });\n        return $.Deferred().resolve();\n    };\n\n    /**\n     * Delete the given item.\n     *\n     * @method\n     * @param {Event} e The event\n     * @param {int} id The item id\n     * @param {string} text The event\n     * @return {Deferred}\n     */\n    TodoControl.prototype.deleteItem = function(e, id, text) {\n        var self = this;\n        var trigger = $(e.currentTarget);\n\n        if (!id) {\n            return $.Deferred().resolve();\n        }\n\n        // Create modal.\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: 'Delete item',\n            body: 'Are you sure you want to delete <strong>' + text + '</strong>?',\n        }, trigger)\n        .done(function(modal) {\n\n            modal.setSaveButtonText('Confirm');\n            modal.getRoot().on(ModalEvents.save, function() {\n\n                return Ajax.call([{\n                    methodname: 'block_todo_delete_item',\n                    args: {\n                        id: id\n                    }\n\n                }])[0].fail(function(reason) {\n                    Log.error('block_todo/control: unable to delete the item');\n                    Log.debug(reason);\n                    return $.Deferred().reject();\n\n                }).then(function(deletedid) {\n                    self.itemsList.find('[data-item=\"' + deletedid + '\"]').remove();\n                    return $.Deferred().resolve();\n                });\n            });\n\n            // Handle hidden event.\n            modal.getRoot().on(ModalEvents.hidden, function() {\n                // Destroy when hidden.\n                modal.destroy();\n            });\n\n            // Show the modal.\n            modal.show();\n        });\n        return $.Deferred().resolve();\n    };\n\n    /**\n     * Take a date string and convert to timestamp\n     *\n     * @param {string} date date string\n     * @return {int} 10 digit timestamp\n     */\n    function dateToTimestamp(date) {\n        return Date.parse(date) / 1000;\n    }\n\n    /**\n     * Take a 10 digit timestamp and convert to date string\n     *\n     * @param {int} timestamp 10 digit timestamp\n     * @return {string} YYYY-MM-DD\n     */\n    function timestampToDate(timestamp) {\n\n        const date = new Date(timestamp * 1000);\n        const datevalues = [\n            date.getFullYear(),\n            (\"0\" + date.getMonth()+1).slice(-2),\n            (\"0\" + date.getDate()).slice(-2),\n        ];\n\n        return datevalues[0] + '-' + datevalues[1] + '-' + datevalues[2];\n    }\n\n    /**\n     * Take a 10 digit timestamp and convert to date format like Mon 1 Jan.\n     *\n     * @param {int} timestamp 10 digit timestamp\n     * @return {string} YYYY-MM-DD\n     */\n    function timestampToFormattedDate(timestamp) {\n\n        var options = {weekday: 'short', month: 'short', day: 'numeric'};\n        const date = new Date(timestamp * 1000);\n        return date.toLocaleDateString('en-au', options);\n    }\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","$","Log","Ajax","Templates","Str","ModalFactory","ModalEvents","TodoControl","region","instanceid","contextid","this","dateToTimestamp","date","Date","parse","prototype","main","addForm","find","first","addTextInput","addDueDateInput","addSubmitButton","itemsList","refreshButton","initAddFeatures","initEditFeatures","initRefresh","self","on","e","preventDefault","addNewTodo","refreshTodo","submit","id","currentTarget","parent","attr","toggleItem","text","deleteItem","duedate","editItem","call","methodname","args","fail","reason","error","debug","Deferred","reject","then","response","render","items","html","resolve","todoText","trim","val","prop","todotext","addClass","item","list","formattedDate","options","weekday","month","day","toLocaleDateString","attribute","length","prepend","addDategroup","focus","get_string","replaceWith","trigger","timestamp","datevalues","getFullYear","getMonth","slice","getDate","timestampToDate","create","type","types","SAVE_CANCEL","title","body","done","modal","getRoot","save","modalBody","getBody","newText","newDuedate","hidden","destroy","show","setSaveButtonText","deletedid","remove","init"],"mappings":"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"}